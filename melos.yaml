# melos.yaml
name: ditonton_expert   

packages:
  - packages/*

commands:
  bootstrap:
    usePubspecOverrides: true
  analyze:
    run: melos exec -- "flutter analyze"
    description: Run `flutter analyze` in all packages
  
  format:
    run: melos exec -- "flutter format . --set-exit-if-changed"
    description: Run `flutter format .` in all packages

  test:
    # Only run the test command when the package has a test directory
    run: melos exec --dir-exists=test -- "flutter test"
    description: Run `flutter test` in all packages

scripts:
  test:unit:
    run: melos exec --dir-exists=test -- "flutter test -r expanded"
    description: Run unit tests in all packages
  test:integration:
    run: melos exec --dir-exists=integration_test -- "flutter test integration_test -r expanded"
    description: Run integration tests in all packages
  test:all:
    run: |
      melos run test:unit && melos run test:integration
    description: Run unit + integration tests in all packages
